﻿<!doctype html>
<html lang="en" data-theme="dark">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/themes.css">
  <link rel="stylesheet" href="css/v2-system.css">
  <link rel="icon" href="icons/192.png">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" rel="stylesheet">
  <script src="js/perf-mode.js"></script>
  <title>NZ • Settings</title>
  <link rel="stylesheet" href="css/v3-polish.css">
</head>

<body class="v2-page settings-page">
  <nav class="navbar">
    <div class="brand"><i class="fa-solid fa-heart"></i> NZ</div>
    <div class="nav-actions">
      <a class="btn" href="/"><i class="fa-solid fa-house"></i> Home</a>
    </div>
  </nav>
  <div class="container">
    <a class="btn back-home" href="/"><i class="fa-solid fa-arrow-left"></i> Back to Home</a>
    <div class="grid">
      <div class="card">
        <div class="section-title">Theme</div>
        <div class="toggle">
          <select id="theme-select" class="input" style="max-width:220px">
            <option value="dark">Dark</option>
            <option value="light">Light</option>
          </select>
        </div>
      </div>
      <div class="card">
        <div class="section-title">Performance</div>
        <div class="toggle">
          <select id="performance-select" class="input" style="max-width:220px">
            <option value="auto">Auto (Recommended)</option>
            <option value="lite">Battery Saver</option>
            <option value="full">Max Visual</option>
          </select>
        </div>
        <div id="performance-note" class="muted small" style="margin-top:10px">Mode: Auto</div>
      </div>
      <div class="card">
        <div class="section-title">College LMS</div>
        <div class="form-group">
          <label class="form-label" for="lms-url-input">LMS URL</label>
          <input
            id="lms-url-input"
            class="input"
            type="url"
            inputmode="url"
            placeholder="https://elearning.itg.ac.id/student_area/tugas/index">
        </div>
        <div style="display:flex; gap:10px; flex-wrap:wrap">
          <button id="save-lms-btn" class="btn" style="flex:1; min-width:130px" type="button">
            <i class="fa-solid fa-floppy-disk"></i> Save
          </button>
          <button id="open-lms-settings-btn" class="btn secondary" style="flex:1; min-width:130px" type="button">
            <i class="fa-solid fa-arrow-up-right-from-square"></i> Open LMS
          </button>
        </div>
      </div>
      <div class="card activity-analytics-card">
        <div class="section-title"><i class="fa-solid fa-chart-simple"></i> Z AI Activity Analytics</div>
        <div class="activity-analytics-head">
          <div id="activity-analytics-updated" class="muted small">Belum ada data.</div>
          <button id="refresh-activity-analytics-btn" class="btn small secondary" type="button">
            <i class="fa-solid fa-rotate-right"></i> Refresh
          </button>
        </div>

        <div class="activity-kpi-grid">
          <div class="activity-kpi">
            <span>Total Events (7d)</span>
            <strong id="activity-total-events">0</strong>
          </div>
          <div class="activity-kpi">
            <span>Active Days (7d)</span>
            <strong id="activity-active-days">0/7</strong>
          </div>
          <div class="activity-kpi">
            <span>Current Streak</span>
            <strong id="activity-streak-days">0 hari</strong>
          </div>
          <div class="activity-kpi">
            <span>Reply Rate</span>
            <strong id="activity-reply-rate">0%</strong>
          </div>
        </div>

        <div class="activity-analytics-grid">
          <section class="activity-panel">
            <h3>Funnel Z AI (7 Hari)</h3>
            <div id="activity-funnel-list" class="activity-list"></div>
          </section>
          <section class="activity-panel">
            <h3>Top Events</h3>
            <div id="activity-top-events" class="activity-list"></div>
          </section>
          <section class="activity-panel">
            <h3>Hourly Heatmap</h3>
            <div id="activity-hourly-heatmap" class="activity-heatmap"></div>
          </section>
          <section class="activity-panel">
            <h3>Retention Harian (7 Hari)</h3>
            <div id="activity-retention-rows" class="activity-list"></div>
          </section>
          <section class="activity-panel">
            <h3>Z AI Engine Health</h3>
            <div id="chat-metrics-summary" class="activity-list"></div>
            <div id="chat-metrics-engines" class="activity-list" style="margin-top:10px"></div>
          </section>
        </div>
      </div>
      <div class="card">
        <div class="section-title">App Info</div>
        <button id="install-btn" class="btn primary" style="display:none; width:100%; margin-bottom:10px">
          <i class="fa-solid fa-download"></i> Install App
        </button>
        <div class="muted small">Version 1.0.0 (PWA Ready)</div>
      </div>
      <div class="card">
        <div class="section-title">Session</div>
        <button id="logout-btn" class="btn danger"><i class="fa-solid fa-right-from-bracket"></i> Logout</button>
      </div>
    </div>
    <div class="footer">NZ</div>
  </div>
  <nav class="bottom-nav">
    <a href="/" class="nav-item">
      <i class="fa-solid fa-house-chimney"></i>
      <span>Home</span>
    </a>
    <a href="/daily-tasks" class="nav-item">
      <i class="fa-solid fa-list-check"></i>
      <span>Tasks</span>
    </a>
    <a href="/goals" class="nav-item">
      <i class="fa-solid fa-bullseye"></i>
      <span>Goals</span>
    </a>
    <a href="/chat" class="nav-item">
      <i class="fa-solid fa-message-heart"></i>
      <span>Chat</span>
    </a>
    <a href="/settings" class="nav-item active">
      <i class="fa-solid fa-gear"></i>
      <span>Settings</span>
    </a>
  </nav>

  <script type="module" src="js/v2-motion.js"></script>
  <script type="module" src="js/v3-micro.js"></script>
  <script type="module" src="js/settings.js"></script>
</body>

</html>
